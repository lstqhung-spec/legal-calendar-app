<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTIC Legal Calendar - Admin v17</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script>tailwind.config={theme:{extend:{colors:{navy:{50:'#e8eef5',100:'#c5d4e8',500:'#3d6d9e',600:'#1e3a5f',700:'#162d4a'}}}}}</script>
    <style>
        * { font-family: 'Inter', sans-serif; }
        .sidebar-item:hover { background: rgba(255,255,255,0.1); }
        .sidebar-item.active { background: rgba(255,255,255,0.2); border-left: 4px solid #f5c842; }
        .card { background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 100; }
        .modal-content { background: white; border-radius: 16px; max-width: 700px; width: 95%; max-height: 90vh; overflow-y: auto; }
        .btn-primary { background: #1e3a5f; color: white; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; }
        .btn-primary:hover { background: #162d4a; }
        .btn-danger { background: #dc2626; color: white; padding: 8px 16px; border-radius: 8px; font-weight: 600; cursor: pointer; }
        .btn-danger:hover { background: #b91c1c; }
        .input-field { width: 100%; padding: 10px 14px; border: 2px solid #e2e8f0; border-radius: 8px; }
        .input-field:focus { outline: none; border-color: #1e3a5f; }
        select.input-field { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; background-size: 20px; }
        .avatar-preview { width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #1e3a5f, #3d6d9e); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 24px; overflow: hidden; }
        .avatar-preview img { width: 100%; height: 100%; object-fit: cover; }
        .badge { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .badge-green { background: #d1fae5; color: #059669; }
        .badge-red { background: #fee2e2; color: #dc2626; }
        .badge-blue { background: #dbeafe; color: #2563eb; }
        .table-row:hover { background: #f8fafc; }
        .tab-btn { padding: 10px 20px; border-radius: 8px 8px 0 0; cursor: pointer; }
        .tab-btn.active { background: white; border-bottom: 2px solid #1e3a5f; font-weight: 600; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app"></div>
    <div id="modal-root"></div>

    <script>
        const API = '/api';
        let token = localStorage.getItem('adminToken');
        let currentSection = 'dashboard';
        let provinces = [];
        let wards = [];
        let orgTypes = [];

        const app = document.getElementById('app');
        const modalRoot = document.getElementById('modal-root');

        // ========== AUTH ==========
        function checkAuth() {
            if (!token) showLogin();
            else { loadMasterData(); showDashboard(); }
        }

        async function loadMasterData() {
            try {
                const [provRes, typesRes] = await Promise.all([
                    fetch(API + '/admin/provinces', { headers: { 'Authorization': 'Bearer ' + token } }),
                    fetch(API + '/admin/org-types', { headers: { 'Authorization': 'Bearer ' + token } })
                ]);
                const provData = await provRes.json();
                const typesData = await typesRes.json();
                if (provData.success) provinces = provData.data;
                if (typesData.success) orgTypes = typesData.data;
            } catch (e) { console.error('Load master data error:', e); }
        }

        async function loadWards(provinceId) {
            if (!provinceId) { wards = []; return []; }
            try {
                const res = await fetch(API + '/admin/wards?province_id=' + provinceId, { headers: { 'Authorization': 'Bearer ' + token } });
                const data = await res.json();
                if (data.success) { wards = data.data; return data.data; }
            } catch (e) { console.error('Load wards error:', e); }
            return [];
        }

        function showLogin() {
            app.innerHTML = `
                <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-navy-600 to-navy-700 p-4">
                    <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <div class="w-20 h-20 bg-gradient-to-br from-navy-600 to-navy-700 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <span class="text-white text-3xl font-bold">H</span>
                            </div>
                            <h1 class="text-2xl font-bold text-gray-900">HTIC Admin v17</h1>
                            <p class="text-gray-500 mt-2">ƒêƒÉng nh·∫≠p ƒë·ªÉ qu·∫£n l√Ω</p>
                        </div>
                        <div id="loginError" class="hidden bg-red-100 text-red-700 p-3 rounded-lg mb-4 text-sm"></div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">T√™n ƒëƒÉng nh·∫≠p</label>
                                <input type="text" id="username" class="input-field" placeholder="admin" value="admin">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">M·∫≠t kh·∫©u</label>
                                <input type="password" id="password" class="input-field" placeholder="********" onkeypress="if(event.key==='Enter')login()">
                            </div>
                            <button onclick="login()" class="w-full btn-primary py-3">ƒêƒÉng nh·∫≠p</button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            try {
                const res = await fetch(API + '/admin/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });
                const data = await res.json();
                if (data.success) {
                    token = data.token;
                    localStorage.setItem('adminToken', token);
                    loadMasterData();
                    showDashboard();
                } else {
                    document.getElementById('loginError').textContent = data.message || 'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i';
                    document.getElementById('loginError').classList.remove('hidden');
                }
            } catch (e) {
                document.getElementById('loginError').textContent = 'L·ªói k·∫øt n·ªëi server';
                document.getElementById('loginError').classList.remove('hidden');
            }
        }

        function logout() {
            token = null;
            localStorage.removeItem('adminToken');
            showLogin();
        }

        // ========== DASHBOARD ==========
        function showDashboard() {
            app.innerHTML = `
                <div class="flex h-screen">
                    <div class="w-64 bg-navy-600 text-white flex flex-col">
                        <div class="p-6 border-b border-white/10">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center font-bold text-xl">H</div>
                                <div>
                                    <div class="font-bold">HTIC Admin</div>
                                    <div class="text-xs text-white/60">Legal Calendar v17.0</div>
                                </div>
                            </div>
                        </div>
                        <nav class="flex-1 py-4 overflow-y-auto">
                            <div onclick="showSection('dashboard')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">dashboard</span> T·ªïng quan</div>
                            <div onclick="showSection('events')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">event</span> L·ªãch ph√°p l√Ω</div>
                            <div onclick="showSection('news')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">article</span> Tin t·ª©c</div>
                            <div onclick="showSection('organizations')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">business</span> C∆° quan tra c·ª©u</div>
                            <div onclick="showSection('lawyers')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">gavel</span> Lu·∫≠t s∆∞ h·ªó tr·ª£</div>
                            <div onclick="showSection('support')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">support_agent</span> Y√™u c·∫ßu t∆∞ v·∫•n</div>
                            <div class="border-t border-white/10 my-2"></div>
                            <div onclick="showSection('locations')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">location_on</span> Qu·∫£n l√Ω ƒë·ªãa ƒëi·ªÉm</div>
                            <div onclick="showSection('settings')" class="sidebar-item px-6 py-3 cursor-pointer flex items-center gap-3"><span class="material-icons text-sm">settings</span> C√†i ƒë·∫∑t App</div>
                        </nav>
                        <div class="p-4 border-t border-white/10">
                            <button onclick="logout()" class="w-full flex items-center justify-center gap-2 py-2 text-red-300 hover:text-red-200">
                                <span class="material-icons text-sm">logout</span> ƒêƒÉng xu·∫•t
                            </button>
                        </div>
                    </div>
                    <div class="flex-1 overflow-auto bg-gray-100">
                        <div id="content" class="p-6"></div>
                    </div>
                </div>
            `;
            showSection(currentSection);
        }

        function showSection(section) {
            currentSection = section;
            document.querySelectorAll('.sidebar-item').forEach((el, i) => {
                el.classList.remove('active');
                if ((section === 'dashboard' && i === 0) ||
                    (section === 'events' && i === 1) ||
                    (section === 'news' && i === 2) ||
                    (section === 'organizations' && i === 3) ||
                    (section === 'lawyers' && i === 4) ||
                    (section === 'support' && i === 5) ||
                    (section === 'locations' && i === 6) ||
                    (section === 'settings' && i === 7)) {
                    el.classList.add('active');
                }
            });
            
            switch(section) {
                case 'dashboard': loadDashboardContent(); break;
                case 'events': loadEvents(); break;
                case 'news': loadNews(); break;
                case 'organizations': loadOrganizations(); break;
                case 'lawyers': loadLawyers(); break;
                case 'support': loadSupport(); break;
                case 'locations': loadLocations(); break;
                case 'settings': loadSettings(); break;
            }
        }

        // ========== DASHBOARD CONTENT ==========
        async function loadDashboardContent() {
            document.getElementById('content').innerHTML = '<div class="text-center py-10">ƒêang t·∫£i...</div>';
            try {
                const res = await fetch(API + '/admin/stats', { headers: { 'Authorization': 'Bearer ' + token } });
                const data = await res.json();
                if (data.success) {
                    const s = data.data;
                    document.getElementById('content').innerHTML = `
                        <h1 class="text-2xl font-bold text-gray-900 mb-6">T·ªïng quan</h1>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="card p-6"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"><span class="material-icons text-blue-600">event</span></div><div><div class="text-2xl font-bold">${s.events?.total || 0}</div><div class="text-sm text-gray-500">S·ª± ki·ªán ph√°p l√Ω</div></div></div></div>
                            <div class="card p-6"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center"><span class="material-icons text-green-600">article</span></div><div><div class="text-2xl font-bold">${s.news?.total || 0}</div><div class="text-sm text-gray-500">Tin t·ª©c</div></div></div></div>
                            <div class="card p-6"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center"><span class="material-icons text-purple-600">gavel</span></div><div><div class="text-2xl font-bold">${s.lawyers?.total || 0}</div><div class="text-sm text-gray-500">Lu·∫≠t s∆∞</div></div></div></div>
                            <div class="card p-6"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center"><span class="material-icons text-orange-600">support_agent</span></div><div><div class="text-2xl font-bold">${s.support_requests?.pending || 0}</div><div class="text-sm text-gray-500">Y√™u c·∫ßu ch·ªù</div></div></div></div>
                        </div>
                        <div class="card p-6">
                            <h2 class="text-lg font-bold mb-4">Th√¥ng tin h·ªá th·ªëng</h2>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-xl font-bold text-navy-600">${provinces.length}</div><div class="text-sm text-gray-500">T·ªânh/Th√†nh</div></div>
                                <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-xl font-bold text-navy-600">${s.organizations?.total || 0}</div><div class="text-sm text-gray-500">C∆° quan</div></div>
                                <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-xl font-bold text-navy-600">${orgTypes.length}</div><div class="text-sm text-gray-500">Lo·∫°i c∆° quan</div></div>
                                <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-xl font-bold text-navy-600">v17.0</div><div class="text-sm text-gray-500">Phi√™n b·∫£n</div></div>
                            </div>
                        </div>
                    `;
                }
            } catch (e) { document.getElementById('content').innerHTML = '<div class="text-red-500">L·ªói t·∫£i d·ªØ li·ªáu</div>'; }
        }

        // ========== LOCATIONS (T·ªàNH/TH√ÄNH & PH∆Ø·ªúNG/X√É) ==========
        let locationTab = 'provinces';

        async function loadLocations() {
            await loadMasterData();
            document.getElementById('content').innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-900">Qu·∫£n l√Ω ƒë·ªãa ƒëi·ªÉm</h1>
                </div>
                <div class="card">
                    <div class="flex border-b">
                        <div onclick="switchLocationTab('provinces')" class="tab-btn ${locationTab === 'provinces' ? 'active' : ''}" id="tab-provinces">T·ªânh/Th√†nh ph·ªë (${provinces.length})</div>
                        <div onclick="switchLocationTab('wards')" class="tab-btn ${locationTab === 'wards' ? 'active' : ''}" id="tab-wards">Ph∆∞·ªùng/X√£</div>
                    </div>
                    <div id="location-content" class="p-6"></div>
                </div>
            `;
            switchLocationTab(locationTab);
        }

        async function switchLocationTab(tab) {
            locationTab = tab;
            document.getElementById('tab-provinces').className = 'tab-btn ' + (tab === 'provinces' ? 'active' : '');
            document.getElementById('tab-wards').className = 'tab-btn ' + (tab === 'wards' ? 'active' : '');
            
            if (tab === 'provinces') {
                renderProvincesTab();
            } else {
                renderWardsTab();
            }
        }

        function renderProvincesTab() {
            document.getElementById('location-content').innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <p class="text-gray-600">Danh s√°ch t·ªânh/th√†nh ph·ªë do b·∫°n t·ª± nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng trong app</p>
                    <button onclick="showProvinceModal()" class="btn-primary flex items-center gap-2"><span class="material-icons text-sm">add</span> Th√™m m·ªõi</button>
                </div>
                <table class="w-full">
                    <thead><tr class="text-left text-sm text-gray-500 border-b"><th class="pb-3">T√äN</th><th class="pb-3">M√É</th><th class="pb-3">V√ôNG</th><th class="pb-3">S·ªê PH∆Ø·ªúNG/X√É</th><th class="pb-3">THAO T√ÅC</th></tr></thead>
                    <tbody id="provinces-list"></tbody>
                </table>
            `;
            loadProvincesData();
        }

        async function loadProvincesData() {
            try {
                const res = await fetch(API + '/admin/provinces', { headers: { 'Authorization': 'Bearer ' + token } });
                const data = await res.json();
                if (data.success) {
                    provinces = data.data;
                    // Load ward counts
                    const wardsRes = await fetch(API + '/admin/wards', { headers: { 'Authorization': 'Bearer ' + token } });
                    const wardsData = await wardsRes.json();
                    const wardCounts = {};
                    if (wardsData.success) {
                        wardsData.data.forEach(w => {
                            wardCounts[w.province_id] = (wardCounts[w.province_id] || 0) + 1;
                        });
                    }
                    
                    document.getElementById('provinces-list').innerHTML = provinces.length === 0 
                        ? '<tr><td colspan="5" class="text-center py-8 text-gray-400">Ch∆∞a c√≥ d·ªØ li·ªáu. Nh·∫•n "Th√™m m·ªõi" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</td></tr>'
                        : provinces.map(p => `
                        <tr class="table-row border-b">
                            <td class="py-4 font-medium">${p.name}</td>
                            <td class="py-4 text-gray-500">${p.code || '-'}</td>
                            <td class="py-4"><span class="badge ${p.region === 'north' ? 'badge-blue' : p.region === 'central' ? 'badge-green' : 'bg-orange-100 text-orange-700'}">${p.region === 'north' ? 'Mi·ªÅn B·∫Øc' : p.region === 'central' ? 'Mi·ªÅn Trung' : p.region === 'south' ? 'Mi·ªÅn Nam' : '-'}</span></td>
                            <td class="py-4">${wardCounts[p.id] || 0} ph∆∞·ªùng/x√£</td>
                            <td class="py-4">
                                <button onclick="showProvinceModal(${JSON.stringify(p).replace(/"/g, '&quot;')})" class="text-blue-600 hover:text-blue-800 mr-3"><span class="material-icons text-sm">edit</span></button>
                                <button onclick="deleteProvince(${p.id})" class="text-red-600 hover:text-red-800"><span class="material-icons text-sm">delete</span></button>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (e) { console.error(e); }
        }

        function showProvinceModal(province = null) {
            modalRoot.innerHTML = `
                <div class="modal" onclick="if(event.target===this)closeModal()">
                    <div class="modal-content p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold">${province ? 'S·ª≠a' : 'Th√™m'} T·ªânh/Th√†nh ph·ªë</h2>
                            <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><span class="material-icons">close</span></button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-semibold mb-2">T√™n t·ªânh/th√†nh *</label>
                                <input type="text" id="prov-name" class="input-field" value="${province?.name || ''}" placeholder="VD: TP. H·ªì Ch√≠ Minh">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold mb-2">M√£ (t√πy ch·ªçn)</label>
                                    <input type="text" id="prov-code" class="input-field" value="${province?.code || ''}" placeholder="VD: hcm">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2">V√πng mi·ªÅn</label>
                                    <select id="prov-region" class="input-field">
                                        <option value="">-- Ch·ªçn --</option>
                                        <option value="north" ${province?.region === 'north' ? 'selected' : ''}>Mi·ªÅn B·∫Øc</option>
                                        <option value="central" ${province?.region === 'central' ? 'selected' : ''}>Mi·ªÅn Trung</option>
                                        <option value="south" ${province?.region === 'south' ? 'selected' : ''}>Mi·ªÅn Nam</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button onclick="closeModal()" class="px-6 py-2 border rounded-lg">H·ªßy</button>
                            <button onclick="saveProvince(${province?.id || 'null'})" class="btn-primary">L∆∞u</button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function saveProvince(id) {
            const data = {
                name: document.getElementById('prov-name').value,
                code: document.getElementById('prov-code').value || null,
                region: document.getElementById('prov-region').value || null
            };
            if (!data.name) { alert('Vui l√≤ng nh·∫≠p t√™n'); return; }
            try {
                const res = await fetch(API + '/admin/provinces' + (id ? '/' + id : ''), {
                    method: id ? 'PUT' : 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (result.success) { closeModal(); loadProvincesData(); loadMasterData(); }
                else alert(result.message || 'L·ªói');
            } catch (e) { alert('L·ªói k·∫øt n·ªëi'); }
        }

        async function deleteProvince(id) {
            if (!confirm('X√≥a t·ªânh/th√†nh n√†y s·∫Ω x√≥a lu√¥n t·∫•t c·∫£ ph∆∞·ªùng/x√£ thu·ªôc n√≥. Ti·∫øp t·ª•c?')) return;
            try {
                const res = await fetch(API + '/admin/provinces/' + id, { method: 'DELETE', headers: { 'Authorization': 'Bearer ' + token } });
                const result = await res.json();
                if (result.success) { loadProvincesData(); loadMasterData(); }
            } catch (e) { alert('L·ªói'); }
        }

        // ========== WARDS TAB ==========
        let selectedProvinceForWards = null;

        async function renderWardsTab() {
            document.getElementById('location-content').innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center gap-4">
                        <label class="font-semibold">Ch·ªçn T·ªânh/Th√†nh:</label>
                        <select id="ward-province-filter" class="input-field w-64" onchange="filterWardsByProvince()">
                            <option value="">-- T·∫•t c·∫£ --</option>
                            ${provinces.map(p => `<option value="${p.id}" ${selectedProvinceForWards == p.id ? 'selected' : ''}>${p.name}</option>`).join('')}
                        </select>
                    </div>
                    <button onclick="showWardModal()" class="btn-primary flex items-center gap-2"><span class="material-icons text-sm">add</span> Th√™m Ph∆∞·ªùng/X√£</button>
                </div>
                <table class="w-full">
                    <thead><tr class="text-left text-sm text-gray-500 border-b"><th class="pb-3">T√äN PH∆Ø·ªúNG/X√É</th><th class="pb-3">THU·ªòC T·ªàNH/TH√ÄNH</th><th class="pb-3">M√É</th><th class="pb-3">THAO T√ÅC</th></tr></thead>
                    <tbody id="wards-list"><tr><td colspan="4" class="text-center py-8 text-gray-400">Ch·ªçn t·ªânh/th√†nh ƒë·ªÉ xem danh s√°ch ph∆∞·ªùng/x√£</td></tr></tbody>
                </table>
            `;
            if (selectedProvinceForWards) filterWardsByProvince();
        }

        async function filterWardsByProvince() {
            selectedProvinceForWards = document.getElementById('ward-province-filter').value;
            if (!selectedProvinceForWards) {
                document.getElementById('wards-list').innerHTML = '<tr><td colspan="4" class="text-center py-8 text-gray-400">Ch·ªçn t·ªânh/th√†nh ƒë·ªÉ xem danh s√°ch ph∆∞·ªùng/x√£</td></tr>';
                return;
            }
            try {
                const res = await fetch(API + '/admin/wards?province_id=' + selectedProvinceForWards, { headers: { 'Authorization': 'Bearer ' + token } });
                const data = await res.json();
                if (data.success) {
                    const prov = provinces.find(p => p.id == selectedProvinceForWards);
                    document.getElementById('wards-list').innerHTML = data.data.length === 0
                        ? `<tr><td colspan="4" class="text-center py-8 text-gray-400">Ch∆∞a c√≥ ph∆∞·ªùng/x√£ cho ${prov?.name}. Nh·∫•n "Th√™m Ph∆∞·ªùng/X√£" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</td></tr>`
                        : data.data.map(w => `
                        <tr class="table-row border-b">
                            <td class="py-4 font-medium">${w.name}</td>
                            <td class="py-4 text-gray-500">${w.province_name || prov?.name || '-'}</td>
                            <td class="py-4 text-gray-500">${w.code || '-'}</td>
                            <td class="py-4">
                                <button onclick="showWardModal(${JSON.stringify(w).replace(/"/g, '&quot;')})" class="text-blue-600 hover:text-blue-800 mr-3"><span class="material-icons text-sm">edit</span></button>
                                <button onclick="deleteWard(${w.id})" class="text-red-600 hover:text-red-800"><span class="material-icons text-sm">delete</span></button>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (e) { console.error(e); }
        }

        function showWardModal(ward = null) {
            modalRoot.innerHTML = `
                <div class="modal" onclick="if(event.target===this)closeModal()">
                    <div class="modal-content p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold">${ward ? 'S·ª≠a' : 'Th√™m'} Ph∆∞·ªùng/X√£</h2>
                            <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><span class="material-icons">close</span></button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-semibold mb-2">Thu·ªôc T·ªânh/Th√†nh *</label>
                                <select id="ward-province" class="input-field">
                                    <option value="">-- Ch·ªçn --</option>
                                    ${provinces.map(p => `<option value="${p.id}" ${(ward?.province_id || selectedProvinceForWards) == p.id ? 'selected' : ''}>${p.name}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">T√™n Ph∆∞·ªùng/X√£ *</label>
                                <input type="text" id="ward-name" class="input-field" value="${ward?.name || ''}" placeholder="VD: Ph∆∞·ªùng T√¢n Ph√∫">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">M√£ (t√πy ch·ªçn)</label>
                                <input type="text" id="ward-code" class="input-field" value="${ward?.code || ''}" placeholder="VD: tanphu">
                            </div>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button onclick="closeModal()" class="px-6 py-2 border rounded-lg">H·ªßy</button>
                            <button onclick="saveWard(${ward?.id || 'null'})" class="btn-primary">L∆∞u</button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function saveWard(id) {
            const data = {
                province_id: document.getElementById('ward-province').value,
                name: document.getElementById('ward-name').value,
                code: document.getElementById('ward-code').value || null
            };
            if (!data.province_id || !data.name) { alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß'); return; }
            try {
                const res = await fetch(API + '/admin/wards' + (id ? '/' + id : ''), {
                    method: id ? 'PUT' : 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (result.success) { closeModal(); filterWardsByProvince(); }
                else alert(result.message || 'L·ªói');
            } catch (e) { alert('L·ªói k·∫øt n·ªëi'); }
        }

        async function deleteWard(id) {
            if (!confirm('X√≥a ph∆∞·ªùng/x√£ n√†y?')) return;
            try {
                const res = await fetch(API + '/admin/wards/' + id, { method: 'DELETE', headers: { 'Authorization': 'Bearer ' + token } });
                if ((await res.json()).success) filterWardsByProvince();
            } catch (e) { alert('L·ªói'); }
        }

        // ========== LAWYERS ==========
        async function loadLawyers() {
            document.getElementById('content').innerHTML = '<div class="text-center py-10">ƒêang t·∫£i...</div>';
            try {
                const res = await fetch(API + '/admin/lawyers', { headers: { 'Authorization': 'Bearer ' + token } });
                const data = await res.json();
                if (data.success) {
                    document.getElementById('content').innerHTML = `
                        <div class="flex justify-between items-center mb-6">
                            <h1 class="text-2xl font-bold">Lu·∫≠t s∆∞ h·ªó tr·ª£</h1>
                            <button onclick="showLawyerModal()" class="btn-primary flex items-center gap-2"><span class="material-icons text-sm">add</span> Th√™m m·ªõi</button>
                        </div>
                        <div class="card overflow-hidden">
                            <table class="w-full">
                                <thead><tr class="text-left text-sm text-gray-500 bg-gray-50"><th class="p-4">H·ªå T√äN</th><th class="p-4">C√îNG TY</th><th class="p-4">ƒêI·ªÜN THO·∫†I</th><th class="p-4">ƒê·ªäA CH·ªà</th><th class="p-4">ONLINE</th><th class="p-4">THAO T√ÅC</th></tr></thead>
                                <tbody>${data.data.map(l => `
                                    <tr class="table-row border-t">
                                        <td class="p-4">
                                            <div class="flex items-center gap-3">
                                                <div class="avatar-preview w-10 h-10 text-sm">${l.avatar_url ? `<img src="${l.avatar_url}" onerror="this.style.display='none';this.parentElement.innerHTML='${l.name.charAt(0)}'">` : l.name.charAt(0)}</div>
                                                <div><div class="font-medium">${l.name}</div>${l.is_primary ? '<span class="badge badge-blue text-xs">Ch√≠nh</span>' : ''}</div>
                                            </div>
                                        </td>
                                        <td class="p-4 text-gray-600">${l.company || '-'}</td>
                                        <td class="p-4">${l.phone || '-'}</td>
                                        <td class="p-4 text-sm text-gray-500">${[l.ward_name, l.province_name].filter(Boolean).join(', ') || '-'}</td>
                                        <td class="p-4"><span class="badge ${l.is_online ? 'badge-green' : 'badge-red'}">${l.is_online ? 'Online' : 'Offline'}</span></td>
                                        <td class="p-4">
                                            <button onclick='showLawyerModal(${JSON.stringify(l).replace(/'/g, "\\'")})' class="text-blue-600 hover:text-blue-800 mr-2"><span class="material-icons text-sm">edit</span></button>
                                            <button onclick="deleteLawyer(${l.id})" class="text-red-600 hover:text-red-800"><span class="material-icons text-sm">delete</span></button>
                                        </td>
                                    </tr>
                                `).join('')}</tbody>
                            </table>
                        </div>
                    `;
                }
            } catch (e) { console.error(e); }
        }

        function showLawyerModal(lawyer = null) {
            modalRoot.innerHTML = `
                <div class="modal" onclick="if(event.target===this)closeModal()">
                    <div class="modal-content p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold">${lawyer ? 'S·ª≠a' : 'Th√™m'} lu·∫≠t s∆∞</h2>
                            <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><span class="material-icons">close</span></button>
                        </div>
                        <div class="flex gap-6 mb-6">
                            <div class="flex flex-col items-center">
                                <div class="avatar-preview" id="lawyer-avatar-preview">${lawyer?.avatar_url ? `<img src="${lawyer.avatar_url}" onerror="this.style.display='none'">` : (lawyer?.name?.charAt(0) || 'LS')}</div>
                                <span class="text-xs text-gray-400 mt-2">Xem tr∆∞·ªõc Avatar</span>
                            </div>
                            <div class="flex-1">
                                <label class="block text-sm font-semibold mb-2">üñºÔ∏è URL ·∫¢nh ƒë·∫°i di·ªán</label>
                                <input type="text" id="lawyer-avatar" class="input-field" value="${lawyer?.avatar_url || ''}" placeholder="https://example.com/avatar.jpg" oninput="updateLawyerAvatarPreview()">
                                <p class="text-xs text-gray-400 mt-1">Nh·∫≠p URL h√¨nh ·∫£nh (khuy·∫øn ngh·ªã: 200x200px, ƒë·ªãnh d·∫°ng JPG/PNG)</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold mb-2">H·ªç t√™n *</label>
                                <input type="text" id="lawyer-name" class="input-field" value="${lawyer?.name || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">C√¥ng ty</label>
                                <input type="text" id="lawyer-company" class="input-field" value="${lawyer?.company || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">ƒêi·ªán tho·∫°i</label>
                                <input type="text" id="lawyer-phone" class="input-field" value="${lawyer?.phone || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Zalo</label>
                                <input type="text" id="lawyer-zalo" class="input-field" value="${lawyer?.zalo || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Email</label>
                                <input type="email" id="lawyer-email" class="input-field" value="${lawyer?.email || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Chuy√™n m√¥n</label>
                                <input type="text" id="lawyer-spec" class="input-field" value="${lawyer?.specialization || ''}" placeholder="VD: Thu·∫ø, M&A, Lao ƒë·ªông">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">T·ªânh/Th√†nh ph·ªë</label>
                                <select id="lawyer-province" class="input-field" onchange="loadLawyerWards()">
                                    <option value="">-- Ch·ªçn --</option>
                                    ${provinces.map(p => `<option value="${p.id}" ${lawyer?.province_id == p.id ? 'selected' : ''}>${p.name}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Ph∆∞·ªùng/X√£</label>
                                <select id="lawyer-ward" class="input-field">
                                    <option value="">-- Ch·ªçn t·ªânh/th√†nh tr∆∞·ªõc --</option>
                                </select>
                            </div>
                            <div class="col-span-2">
                                <label class="block text-sm font-semibold mb-2">ƒê·ªãa ch·ªâ c·ª• th·ªÉ</label>
                                <input type="text" id="lawyer-address" class="input-field" value="${lawyer?.address || ''}" placeholder="S·ªë nh√†, ƒë∆∞·ªùng...">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Gi·ªù l√†m vi·ªác</label>
                                <input type="text" id="lawyer-hours" class="input-field" value="${lawyer?.working_hours || ''}" placeholder="VD: 8:00 - 18:00">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Ng√†y l√†m vi·ªác</label>
                                <input type="text" id="lawyer-days" class="input-field" value="${lawyer?.working_days || ''}" placeholder="VD: Th·ª© 2 - Th·ª© 6">
                            </div>
                            <div class="col-span-2">
                                <label class="block text-sm font-semibold mb-2">Gi·ªõi thi·ªáu</label>
                                <textarea id="lawyer-bio" class="input-field" rows="2">${lawyer?.bio || ''}</textarea>
                            </div>
                        </div>
                        <div class="flex gap-6 mt-4">
                            <label class="flex items-center gap-2"><input type="checkbox" id="lawyer-online" ${lawyer?.is_online !== false ? 'checked' : ''}> ƒêang online</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="lawyer-primary" ${lawyer?.is_primary ? 'checked' : ''}> Lu·∫≠t s∆∞ ch√≠nh</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="lawyer-active" ${lawyer?.is_active !== false ? 'checked' : ''}> K√≠ch ho·∫°t</label>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button onclick="closeModal()" class="px-6 py-2 border rounded-lg">H·ªßy</button>
                            <button onclick="saveLawyer(${lawyer?.id || 'null'})" class="btn-primary">üíæ L∆∞u</button>
                        </div>
                    </div>
                </div>
            `;
            // Load wards if province selected
            if (lawyer?.province_id) {
                setTimeout(() => loadLawyerWards(lawyer.ward_id), 100);
            }
        }

        async function loadLawyerWards(selectedWardId = null) {
            const provinceId = document.getElementById('lawyer-province').value;
            const wardSelect = document.getElementById('lawyer-ward');
            if (!provinceId) {
                wardSelect.innerHTML = '<option value="">-- Ch·ªçn t·ªânh/th√†nh tr∆∞·ªõc --</option>';
                return;
            }
            const wardsData = await loadWards(provinceId);
            wardSelect.innerHTML = '<option value="">-- Ch·ªçn --</option>' + wardsData.map(w => 
                `<option value="${w.id}" ${selectedWardId == w.id ? 'selected' : ''}>${w.name}</option>`
            ).join('');
        }

        function updateLawyerAvatarPreview() {
            const url = document.getElementById('lawyer-avatar').value;
            const preview = document.getElementById('lawyer-avatar-preview');
            if (url) {
                preview.innerHTML = `<img src="${url}" onerror="this.style.display='none';this.parentElement.innerHTML='LS'">`;
            } else {
                const name = document.getElementById('lawyer-name')?.value || 'LS';
                preview.innerHTML = name.charAt(0);
            }
        }

        async function saveLawyer(id) {
            const data = {
                name: document.getElementById('lawyer-name').value,
                company: document.getElementById('lawyer-company').value,
                phone: document.getElementById('lawyer-phone').value,
                zalo: document.getElementById('lawyer-zalo').value,
                email: document.getElementById('lawyer-email').value,
                avatar_url: document.getElementById('lawyer-avatar').value,
                address: document.getElementById('lawyer-address').value,
                province_id: document.getElementById('lawyer-province').value || null,
                ward_id: document.getElementById('lawyer-ward').value || null,
                working_hours: document.getElementById('lawyer-hours').value,
                working_days: document.getElementById('lawyer-days').value,
                bio: document.getElementById('lawyer-bio').value,
                specialization: document.getElementById('lawyer-spec').value,
                is_online: document.getElementById('lawyer-online').checked,
                is_primary: document.getElementById('lawyer-primary').checked,
                is_active: document.getElementById('lawyer-active').checked
            };
            if (!data.name) { alert('Vui l√≤ng nh·∫≠p h·ªç t√™n'); return; }
            try {
                const res = await fetch(API + '/admin/lawyers' + (id ? '/' + id : ''), {
                    method: id ? 'PUT' : 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (result.success) { closeModal(); loadLawyers(); }
                else alert(result.message || 'L·ªói');
            } catch (e) { alert('L·ªói k·∫øt n·ªëi'); }
        }

        async function deleteLawyer(id) {
            if (!confirm('X√≥a lu·∫≠t s∆∞ n√†y?')) return;
            try {
                const res = await fetch(API + '/admin/lawyers/' + id, { method: 'DELETE', headers: { 'Authorization': 'Bearer ' + token } });
                if ((await res.json()).success) loadLawyers();
            } catch (e) { alert('L·ªói'); }
        }

        // ========== ORGANIZATIONS ==========
        async function loadOrganizations() {
            document.getElementById('content').innerHTML = '<div class="text-center py-10">ƒêang t·∫£i...</div>';
            try {
                const res = await fetch(API + '/admin/organizations', { headers: { 'Authorization': 'Bearer ' + token } });
                const data = await res.json();
                if (data.success) {
                    document.getElementById('content').innerHTML = `
                        <div class="flex justify-between items-center mb-6">
                            <h1 class="text-2xl font-bold">C∆° quan tra c·ª©u</h1>
                            <button onclick="showOrgModal()" class="btn-primary flex items-center gap-2"><span class="material-icons text-sm">add</span> Th√™m m·ªõi</button>
                        </div>
                        <div class="card overflow-hidden">
                            <table class="w-full">
                                <thead><tr class="text-left text-sm text-gray-500 bg-gray-50"><th class="p-4">T√äN C∆† QUAN</th><th class="p-4">LO·∫†I</th><th class="p-4">T·ªàNH/TH√ÄNH</th><th class="p-4">TR·∫†NG TH√ÅI</th><th class="p-4">THAO T√ÅC</th></tr></thead>
                                <tbody>${data.data.length === 0 ? '<tr><td colspan="5" class="p-8 text-center text-gray-400">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>' : data.data.map(o => `
                                    <tr class="table-row border-t">
                                        <td class="p-4 font-medium">${o.name}</td>
                                        <td class="p-4"><span class="badge badge-blue">${o.type_name || '-'}</span></td>
                                        <td class="p-4 text-gray-600">${[o.ward_name, o.province_name].filter(Boolean).join(', ') || '-'}</td>
                                        <td class="p-4"><span class="badge ${o.is_active ? 'badge-green' : 'badge-red'}">${o.is_active ? 'Ho·∫°t ƒë·ªông' : '·∫®n'}</span></td>
                                        <td class="p-4">
                                            <button onclick='showOrgModal(${JSON.stringify(o).replace(/'/g, "\\'")})' class="text-blue-600 hover:text-blue-800 mr-2"><span class="material-icons text-sm">edit</span></button>
                                            <button onclick="deleteOrg(${o.id})" class="text-red-600 hover:text-red-800"><span class="material-icons text-sm">delete</span></button>
                                        </td>
                                    </tr>
                                `).join('')}</tbody>
                            </table>
                        </div>
                    `;
                }
            } catch (e) { console.error(e); }
        }

        function showOrgModal(org = null) {
            modalRoot.innerHTML = `
                <div class="modal" onclick="if(event.target===this)closeModal()">
                    <div class="modal-content p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold">${org ? 'S·ª≠a' : 'Th√™m'} c∆° quan</h2>
                            <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><span class="material-icons">close</span></button>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="col-span-2">
                                <label class="block text-sm font-semibold mb-2">T√™n c∆° quan *</label>
                                <input type="text" id="org-name" class="input-field" value="${org?.name || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Lo·∫°i c∆° quan</label>
                                <select id="org-type" class="input-field">
                                    <option value="">-- Ch·ªçn lo·∫°i --</option>
                                    ${orgTypes.map(t => `<option value="${t.id}" ${org?.type_id == t.id ? 'selected' : ''}>${t.name}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">T·ªânh/Th√†nh ph·ªë</label>
                                <select id="org-province" class="input-field" onchange="loadOrgWards()">
                                    <option value="">-- Ch·ªçn --</option>
                                    ${provinces.map(p => `<option value="${p.id}" ${org?.province_id == p.id ? 'selected' : ''}>${p.name}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Ph∆∞·ªùng/X√£</label>
                                <select id="org-ward" class="input-field">
                                    <option value="">-- Ch·ªçn t·ªânh/th√†nh tr∆∞·ªõc --</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">ƒê·ªãa ch·ªâ c·ª• th·ªÉ</label>
                                <input type="text" id="org-address" class="input-field" value="${org?.address || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">ƒêi·ªán tho·∫°i</label>
                                <input type="text" id="org-phone" class="input-field" value="${org?.phone || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Email</label>
                                <input type="email" id="org-email" class="input-field" value="${org?.email || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Website</label>
                                <input type="text" id="org-website" class="input-field" value="${org?.website || ''}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold mb-2">Gi·ªù l√†m vi·ªác</label>
                                <input type="text" id="org-hours" class="input-field" value="${org?.working_hours || ''}" placeholder="VD: 7:30 - 16:30">
                            </div>
                            <div class="col-span-2">
                                <label class="block text-sm font-semibold mb-2">M√¥ t·∫£ / D·ªãch v·ª•</label>
                                <textarea id="org-desc" class="input-field" rows="2">${org?.description || ''}</textarea>
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="flex items-center gap-2"><input type="checkbox" id="org-active" ${org?.is_active !== false ? 'checked' : ''}> K√≠ch ho·∫°t</label>
                        </div>
                        <div class="flex justify-end gap-3 mt-6">
                            <button onclick="closeModal()" class="px-6 py-2 border rounded-lg">H·ªßy</button>
                            <button onclick="saveOrg(${org?.id || 'null'})" class="btn-primary">üíæ L∆∞u</button>
                        </div>
                    </div>
                </div>
            `;
            if (org?.province_id) setTimeout(() => loadOrgWards(org.ward_id), 100);
        }

        async function loadOrgWards(selectedWardId = null) {
            const provinceId = document.getElementById('org-province').value;
            const wardSelect = document.getElementById('org-ward');
            if (!provinceId) {
                wardSelect.innerHTML = '<option value="">-- Ch·ªçn t·ªânh/th√†nh tr∆∞·ªõc --</option>';
                return;
            }
            const wardsData = await loadWards(provinceId);
            wardSelect.innerHTML = '<option value="">-- Ch·ªçn --</option>' + wardsData.map(w => 
                `<option value="${w.id}" ${selectedWardId == w.id ? 'selected' : ''}>${w.name}</option>`
            ).join('');
        }

        async function saveOrg(id) {
            const data = {
                name: document.getElementById('org-name').value,
                type_id: document.getElementById('org-type').value || null,
                province_id: document.getElementById('org-province').value || null,
                ward_id: document.getElementById('org-ward').value || null,
                address: document.getElementById('org-address').value,
                phone: document.getElementById('org-phone').value,
                email: document.getElementById('org-email').value,
                website: document.getElementById('org-website').value,
                working_hours: document.getElementById('org-hours').value,
                description: document.getElementById('org-desc').value,
                is_active: document.getElementById('org-active').checked
            };
            if (!data.name) { alert('Vui l√≤ng nh·∫≠p t√™n'); return; }
            try {
                const res = await fetch(API + '/admin/organizations' + (id ? '/' + id : ''), {
                    method: id ? 'PUT' : 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (result.success) { closeModal(); loadOrganizations(); }
                else alert(result.message || 'L·ªói');
            } catch (e) { alert('L·ªói k·∫øt n·ªëi'); }
        }

        async function deleteOrg(id) {
            if (!confirm('X√≥a c∆° quan n√†y?')) return;
            try {
                const res = await fetch(API + '/admin/organizations/' + id, { method: 'DELETE', headers: { 'Authorization': 'Bearer ' + token } });
                if ((await res.json()).success) loadOrganizations();
            } catch (e) { alert('L·ªói'); }
        }

        // ========== PLACEHOLDER SECTIONS ==========
        function loadEvents() { document.getElementById('content').innerHTML = '<h1 class="text-2xl font-bold mb-6">L·ªãch ph√°p l√Ω</h1><div class="card p-6">Coming soon...</div>'; }
        function loadNews() { document.getElementById('content').innerHTML = '<h1 class="text-2xl font-bold mb-6">Tin t·ª©c</h1><div class="card p-6">Coming soon...</div>'; }
        function loadSupport() { document.getElementById('content').innerHTML = '<h1 class="text-2xl font-bold mb-6">Y√™u c·∫ßu t∆∞ v·∫•n</h1><div class="card p-6">Coming soon...</div>'; }
        function loadSettings() { document.getElementById('content').innerHTML = '<h1 class="text-2xl font-bold mb-6">C√†i ƒë·∫∑t App</h1><div class="card p-6">Coming soon...</div>'; }

        function closeModal() { modalRoot.innerHTML = ''; }

        // Init
        checkAuth();
    </script>
</body>
</html>
